# قارئ الكتب الإلكترونية GenAI — دليل الاستخدام

يعرض هذا الدليل كيفية استخدام الميزات الأساسية للتطبيق، من القراءة الأساسية إلى الوظائف المتقدمة للذكاء الاصطناعي مثل البحث الدلالي (RAG) والدردشة مع نموذج لغوي كبير (LLM).

## 1. البداية: الفتح والتنقّل

1. **فتح كتاب**: اذهب إلى `ملف > فتح...` لاختيار ملف PDF.
2. **التنقّل**:
   * استخدم عجلة الماوس للتمرير بين الصفحات.
   * استخدم `Ctrl + عجلة الماوس` للتكبير/التصغير.
3. **الفهرس (TOC)**: تتيح اللوحة اليسرى التنقّل في المحتوى. استخدم الأزرار أعلى اللوحة للتبديل بين عرض **الصفحات** وعرض **المحتوى** (الفصول).

## 2. قراءة تفاعلية: التحديد، القاموس والبحث

### تحديد النصوص والصور

- **تحديد نص**: من قائمة `تحرير` اختر `تحديد النص` وحدد المقطع المطلوب.
- **تحديد صورة**: اختر `تحديد مستطيل (صورة)` لالتقاط جزء من المستند كصورة.
- **إجراءات**: بعد تحديد نص أو صورة يمكنك النسخ، الحفظ في ملف، أو الإرسال إلى دردشة الذكاء الاصطناعي.

### استشارة القاموس

1. **الضبط**: اذهب إلى `الإعدادات > القاموس`. افتراضيًا، يستخدم القاموس الـ LLM المُعد لتقديم التعاريف.
2. **الاستخدام**: حدّد كلمة في النص ثم انقر بزر الفأرة الأيمن. من قائمة السياق اختر خيار استشارة القاموس. ستظهر النتيجة في لوحة الدردشة.

### البحث في المستند

تتيح شريط البحث في الأعلى نوعين من البحث:

- **بحث نصي**: اكتب كلمة أو عبارة وانقر "بحث". سيعثر التطبيق على المطابقات الحرفية في النص.
- **بحث دلالي (RAG)**: إذا لم يجد البحث النصي نتائج، سينتقل التطبيق تلقائيًا إلى البحث الدلالي الذي يفهم معنى سؤالك. لعمل ذلك، يجب فهرسة المستند أولًا (انظر قسم RAG أدناه).

## 3. البحث الدلالي عبر RAG (التوليد المعزّز بالاسترجاع)

يتيح RAG طرح أسئلة باللغة الطبيعية حول محتوى الكتاب. لاستخدامه، يلزم أولًا إنشاء "فهرس متجهات (embeddings)" للمستند.

### الخطوة 1: إعداد المتجهات (Embeddings)

1. اذهب إلى `الإعدادات > المتجهات (Embeddings)`.
2. **المزوّد**: اختر مزوّدًا لتوليد المتجهات. يُعد `Ollama` خيارًا رائعًا للتشغيل محليًا على جهازك.
3. **النموذج**: اختر نموذج المتجهات (مثل: `nomic-embed-text`).
4. **إعدادات تقسيم النص**: عدّل `حجم المقطع (Chunk)` و`التداخل` للتحكّم بكيفية تقسيم النص قبل معالجته. القيم الافتراضية غالبًا مناسبة.

### الخطوة 2: فهرسة المستند

1. ومع فتح الكتاب، انقر بزر الفأرة الأيمن داخل العارض واختر `إعادة إنشاء متجهات المستند...`.
2. انتظر حتى يكتمل الإجراء. ستعرض نافذة تقدّم العملية.

### الخطوة 3: تنفيذ بحث دلالي

- استخدم الآن شريط البحث لطرح أسئلة مثل: "ما الفكرة الرئيسية في الفصل الثاني؟" أو "اشرح مفهوم س". سيستخدم التطبيق فهرس RAG للعثور على الأجزاء الأكثر صلة وتقديم إجابة.

## 4. التكامل مع الذكاء الاصطناعي (LLM)

يمكنك ربط التطبيق بخدمة LLM لاستخدام الدردشة، طلب التلخيصات، المرادفات والمزيد.

### ضبط الوصول إلى LLM

1. اذهب إلى `الإعدادات > إعدادات LLM`.
2. **المزوّد**: اختر مزوّدًا — `OpenAI`، `GenerAtiva`، `Ollama` (محلي) أو `OpenRouter`.
3. **سرد/اختبار نموذج**: استخدم إجراء "سرد النماذج" (عند توفره للمزوّد) وزر "اختبار النموذج" للتحقق من بيانات الاعتماد والاتصال.
4. **مفتاح API**: أدخل مفتاح API (للخدمات السحابية). بالنسبة إلى `Ollama` لا يلزم رمز؛ تأكد فقط من أن الخدمة تعمل على `http://localhost:11434`.
5. **النموذج**: اختر النموذج الذي تريد استخدامه (مثل: `gpt-4o-mini`, `llama3`).
6. **القوالب (Prompts)**: خصّص القوالب التي يستخدمها الذكاء الاصطناعي للتلخيص، المرادفات، إلخ.

تُخزَّن الإعدادات في `QSettings` بالمفاتيح:
- `ai/provider`: `openai` | `generativa` | `ollama` | `openrouter`
- `ai/base_url`: عنوان أساسي بديل (اختياري)
- `ai/api_key`: رمز سري (غير مطبق على `ollama`)
- `ai/model`: اسم النموذج (مثل: `gpt-4o-mini`, `llama3`)
- `ai/prompts/synonyms`, `ai/prompts/summaries`, `ai/prompts/explanations`, `ai/prompts/chat`

الخصوصية:
- يطلب التطبيق تأكيدك دائمًا قبل إرسال أي جزء من الكتاب إلى الذكاء الاصطناعي.
- تُخزَّن الرموز السرية في تفضيلات المستخدم.

### استخدام ميزات الذكاء الاصطناعي

- **الدردشة**: افتح لوحة الدردشة للتحدث مع الذكاء الاصطناعي. يمكنك طرح الأسئلة، طلب الشروحات أو إرسال مقاطع وصور من الكتاب للتحليل.
- **التلخيصات والمرادفات**: حدّد نصًا، انقر بزر الفأرة الأيمن واختر خيار التلخيص أو البحث عن مرادفات.
- **القاموس**: حدّد كلمة واستخدم وظيفة القاموس للحصول على تعريفها في لوحة الدردشة.

ملاحظات:
- تستخدم الرسائل النموذج المحدد في إعدادات LLM.
- يمكن تخصيص قوالب الحوار في إعدادات LLM.
- في الإصدار 0.1.9 أضيفت التوافقية مع `OpenRouter`. قد يتوفر مفتاح مجاملة للتجربة الأولية؛ نوصي بضبط مفتاحك الخاص للاستخدام المستمر.

## 5. نصائح وموارد إضافية

- **زر العنوان**: يعرض الزر في وسط الشريط العلوي اسم كتابك. انقر بزر الفأرة الأيمن عليه للوصول إلى إجراءات سريعة مثل إعادة تسمية الملف أو فتحه في مدير الملفات.
- **استكشاف الأخطاء**: إذا لم يستجب الذكاء الاصطناعي، تحقّق من إعدادات LLM (مفتاح API، العنوان الأساسي) واتصال الإنترنت.
- **اختصارات**: استخدم `Ctrl+Enter` لإرسال الرسائل في لوحة الدردشة.
